{"componentChunkName":"component---src-templates-blog-post-js","path":"/tracking-instagram-followers-like-a-true-nerd/","result":{"data":{"markdownRemark":{"html":"<h1>Why?</h1>\n<p>My wife creates <a href=\"https://www.instagram.com/linaestadeviaje/\" target=\"_blank\" rel=\"nofollow\">travel content on Instagram</a>. She’s the type of person that, like me, tracks every possible piece of data. <strong>”<em>What you don’t measure, you can’t improve</em>”</strong>, they said. She wanted to track her follower base growth but most online services won’t offer much of this for free or with the flexibility she wanted.</p>\n<p>She set an alarm every day at 10:00am to register the number of followers in a spreadsheet. This turns out to be very inconvenient for a full-time traveler. Most places have poor data coverage and your daily routine is unpredictable.</p>\n<p>Repetitive tasks are green flags for automation. Given my <a href=\"https://en.wikipedia.org/wiki/Not_invented_here\" target=\"_blank\" rel=\"nofollow\">NIH</a> obsession, I needed to solve this in the most overkill possible way.</p>\n<h1>Problem</h1>\n<p>We need a way to periodically capture the number of followers of an Instagram account. Then, we need to register it in Google Sheets for further data analysis.</p>\n<h1>Proposed solution</h1>\n<p>I found setting up the Instagram API to be somehow cumbersome for such a simple task (good signal for an open source project). I will then <strong>scrap the Instagram profile’s HTML, read the exact count and write it down on a Google Sheet</strong> using the <a href=\"https://developers.google.com/sheets/api\" target=\"_blank\" rel=\"nofollow\">API</a>. I will also need to run this periodically <a href=\"https://medium.com/hackernoon/deploying-frontend-applications-the-fun-way-bc3f69e15331\" target=\"_blank\" rel=\"nofollow\">from my server</a>. Cron will get the job done.</p>\n<p>I’ll go with Python on this one because:</p>\n<ol>\n<li>I’ve done web scrapping before with <a href=\"https://pypi.org/project/beautifulsoup4/\" target=\"_blank\" rel=\"nofollow\">BeautifulSoup</a></li>\n<li>The Google Sheets API has great Python support</li>\n</ol>\n<h1>Implementation</h1>\n<h2>Installation</h2>\n<p>We’ll use <code class=\"language-text\">BeautifulSoup</code> to scrap and the Google APIs to handle auth:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">--upgrade</span> google-api-python-client google-auth-httplib2 google-auth-oauthlib beautifulsoup4</code></pre></div>\n<p><em>Note: I recommend running your pip commands within a virtualenv.</em></p>\n<h2>Read followers</h2>\n<p>Instagram registers a JavaScript object in the window (aka a global) with the number of followers in the prop <code class=\"language-text\">edge_followed_by</code>. We’ll use a regex capture group to get that number and send it to Google Sheets.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber 0\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">import</span> requests\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup\n\nURL <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.instagram.com/linaestadeviaje/'</span>\npage <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>URL<span class=\"token punctuation\">)</span>\n\nsoup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span> <span class=\"token string\">'html.parser'</span><span class=\"token punctuation\">)</span>\nfollowers <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">(</span><span class=\"token string\">'\"edge_followed_by\":{\"count\":(\\d*)}'</span><span class=\"token punctuation\">,</span> soup<span class=\"token punctuation\">.</span>prettify<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>group<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Write to Google Sheets</h2>\n<p>You’ll need to create a private sheet and grab its ID from the URL. Create a new sheet and name it <em>Followers</em>.</p>\n<p>This part is based on the quickstart section of the <a href=\"https://developers.google.com/sheets/api/quickstart/python\" target=\"_blank\" rel=\"nofollow\">Google Sheets Python API guide</a>. It uses OAuth for the initial user consent and then it will store the auth information on the <code class=\"language-text\">./creds/token.pickle</code> file.</p>\n<p>You’ll also need to download your <code class=\"language-text\">credentials.json</code> file to complete the initial OAuth flow. Get yours by clicking on <em>“Enable the Google Sheets API”</em> in the <a href=\"https://developers.google.com/sheets/api/quickstart/python#step_1_turn_on_the\" target=\"_blank\" rel=\"nofollow\">official API docs</a>.</p>\n<h2>Put it all together</h2>\n<p>Here’s what the final script looks like. The code has been <em>documented</em> for easy navigation. I’ve thrown everything into <code class=\"language-text\">main()</code> for simplicity, but I encourage you to write functions.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber 0\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pickle\n<span class=\"token keyword\">import</span> os<span class=\"token punctuation\">.</span>path\n<span class=\"token keyword\">from</span> googleapiclient<span class=\"token punctuation\">.</span>discovery <span class=\"token keyword\">import</span> build\n<span class=\"token keyword\">from</span> google_auth_oauthlib<span class=\"token punctuation\">.</span>flow <span class=\"token keyword\">import</span> InstalledAppFlow\n<span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>transport<span class=\"token punctuation\">.</span>requests <span class=\"token keyword\">import</span> Request\n\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">import</span> requests\n<span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup\n<span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime\n\n<span class=\"token comment\"># If modifying these scopes, delete the file token.pickle.</span>\n<span class=\"token comment\"># Note that this scope is for Read-Write permissions.</span>\nSCOPES <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'https://www.googleapis.com/auth/spreadsheets'</span><span class=\"token punctuation\">]</span>\n\nSPREADSHEET_ID <span class=\"token operator\">=</span> <span class=\"token string\">'###REPLACE WITH YOUR SHEET ID ###'</span>\nWRITE_RANGE_NAME <span class=\"token operator\">=</span> <span class=\"token string\">'Followers!A2:C'</span> <span class=\"token comment\"># 'SheetName!Range'</span>\nCREDS_PATH <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>abspath<span class=\"token punctuation\">(</span><span class=\"token string\">'./creds/token.pickle'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    creds <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>\n    <span class=\"token comment\"># The file token.pickle stores the user's access and refresh tokens, and is</span>\n    <span class=\"token comment\"># created automatically when the authorization flow completes for the first</span>\n    <span class=\"token comment\"># time.</span>\n    <span class=\"token keyword\">if</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span>CREDS_PATH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>CREDS_PATH<span class=\"token punctuation\">,</span> <span class=\"token string\">'rb'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> token<span class=\"token punctuation\">:</span>\n            creds <span class=\"token operator\">=</span> pickle<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># If there are no (valid) credentials available, let the user log in.</span>\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> creds <span class=\"token keyword\">or</span> <span class=\"token keyword\">not</span> creds<span class=\"token punctuation\">.</span>valid<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> creds <span class=\"token keyword\">and</span> creds<span class=\"token punctuation\">.</span>expired <span class=\"token keyword\">and</span> creds<span class=\"token punctuation\">.</span>refresh_token<span class=\"token punctuation\">:</span>\n            creds<span class=\"token punctuation\">.</span>refresh<span class=\"token punctuation\">(</span>Request<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            flow <span class=\"token operator\">=</span> InstalledAppFlow<span class=\"token punctuation\">.</span>from_client_secrets_file<span class=\"token punctuation\">(</span><span class=\"token string\">'credentials.json'</span><span class=\"token punctuation\">,</span> SCOPES<span class=\"token punctuation\">)</span>\n            creds <span class=\"token operator\">=</span> flow<span class=\"token punctuation\">.</span>run_local_server<span class=\"token punctuation\">(</span>port<span class=\"token operator\">=</span><span class=\"token number\">55680</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># Save the credentials for the next run</span>\n        <span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>CREDS_PATH<span class=\"token punctuation\">,</span> <span class=\"token string\">'wb'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> token<span class=\"token punctuation\">:</span>\n            pickle<span class=\"token punctuation\">.</span>dump<span class=\"token punctuation\">(</span>creds<span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Get the followers. You might probably want to move this to a function.</span>\n    URL <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.instagram.com/linaestadeviaje/'</span>\n    page <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>URL<span class=\"token punctuation\">)</span>\n\n    soup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span> <span class=\"token string\">'html.parser'</span><span class=\"token punctuation\">)</span>\n    followers <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">(</span><span class=\"token string\">'\"edge_followed_by\":{\"count\":(\\d*)}'</span><span class=\"token punctuation\">,</span> soup<span class=\"token punctuation\">.</span>prettify<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>group<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># A bit of sugar to get date and time</span>\n    now <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    date_string <span class=\"token operator\">=</span> now<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%m/%d/%Y\"</span><span class=\"token punctuation\">)</span>\n    time_string <span class=\"token operator\">=</span> now<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Call the Sheets API</span>\n    service <span class=\"token operator\">=</span> build<span class=\"token punctuation\">(</span><span class=\"token string\">'sheets'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'v4'</span><span class=\"token punctuation\">,</span> credentials<span class=\"token operator\">=</span>creds<span class=\"token punctuation\">)</span>\n    sheet <span class=\"token operator\">=</span> service<span class=\"token punctuation\">.</span>spreadsheets<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Append a new row with the form [date, time, num_followers]</span>\n    sheet<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>spreadsheetId<span class=\"token operator\">=</span>SAMPLE_SPREADSHEET_ID<span class=\"token punctuation\">,</span>\n                          <span class=\"token builtin\">range</span><span class=\"token operator\">=</span>WRITE_RANGE_NAME<span class=\"token punctuation\">,</span>\n                          valueInputOption<span class=\"token operator\">=</span><span class=\"token string\">'RAW'</span><span class=\"token punctuation\">,</span>\n                          body<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'values'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>date_string<span class=\"token punctuation\">,</span> time_string<span class=\"token punctuation\">,</span> followers<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Dockerize all the things</h2>\n<p>You can leave now if you want. <strong>Run the code above and you’ll be good to go</strong>. In the next few sections, I’ll talk about how you can run this in a server.</p>\n<p>I use a <a href=\"https://medium.com/hackernoon/deploying-frontend-applications-the-fun-way-bc3f69e15331\" target=\"_blank\" rel=\"nofollow\">combination of Docker and Digital Ocean</a> to deploy all my apps (this blog included). This means I need to dockerize all the apps before moving them to prod. This is fantastic, anyways, as I get to have full build processes in very different languages, all running on their own docker containers.</p>\n<p>This is what the <code class=\"language-text\">Dockerfile</code> for this <em>app</em> looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre style=\"counter-reset: linenumber 0\" class=\"language-dockerfile line-numbers\"><code class=\"language-dockerfile\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> python:3</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> pip install --upgrade google-api-python-client google-auth-httplib2 google-auth-oauthlib beautifulsoup4</span>\n<span class=\"token comment\"># Set timezone to register date/time appropriately</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> TZ=America/Bogota</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> ln -snf /usr/share/zoneinfo/<span class=\"token variable\">$TZ</span> /etc/localtime &amp;&amp; echo <span class=\"token variable\">$TZ</span> > /etc/timezone</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ADD</span> main.py /</span>\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [ <span class=\"token string\">\"python\"</span>, <span class=\"token string\">\"./main.py\"</span> ]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Important:</strong> Make sure you don’t commit your <code class=\"language-text\">token.pickle</code> file to GitHub or ship it within your Docker image. It should only be accessible in your prod environment. You will need to move this file from local to prod using your preferred method (e.g. ssh copy, private S3 bucket, temporary public link, etc).</p>\n<h2>Run periodically</h2>\n<p>Much of the value for this comes from running the script periodically. You can achieve this using <a href=\"https://en.wikipedia.org/wiki/Cron\" target=\"_blank\" rel=\"nofollow\">cron</a> on a Unix server. As mentioned above, you want to keep my <code class=\"language-text\">token.pickle</code> out of the Docker image. You’ll then need to mount a volume with the corresponding pointer to the pickle file.</p>\n<p>This is what your crontab should look like if you want to run the routine every hour:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">~ $ <span class=\"token function\">crontab</span> <span class=\"token parameter variable\">-l</span>\n<span class=\"token comment\"># run the IG followers fetching routine every hour</span>\n<span class=\"token number\">0</span> * * * * <span class=\"token function\">docker</span> <span class=\"token function\">rm</span> ig_followers <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span><span class=\"token operator\">=</span>ig_followers <span class=\"token parameter variable\">-v</span> /root/ig_followers/creds:/creds docker-hub-username/ig-followers:latest</code></pre></div>\n<p><em>Bonus: Check out <a href=\"https://crontab.guru/every-5-minutes\" target=\"_blank\" rel=\"nofollow\">this handy tool</a> to create your cron schedule expressions.</em></p>\n<h2>Results</h2>\n<p>Data is beautiful. Having it available in GSheets was the easy part; now it’s up to you to make it count. You can plot your growth over time, running average of your daily growth, weekly change, etc.</p>\n<p>Here you can see a spike in the daily growth (giveway posts and trending pics) and then it drops for a few weeks (COVID-19).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 662px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f65686ee429a6c0ea96d35b651fe31b/1628f/followers-sheet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.73493975903615%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACXUlEQVQ4y21Uh3KjMBTk/78tiUviluKS2BcXbIMpklDZm30Cn50cM28QIC27b1dKJpMJtDFYr9dYLpfY7/d4eHjA19cXlFK4XC44nU44n8/I81zGdV2jaRoYY67FZ60Nkn6/LwDf3994eXkR0MViAV4EIXBRFCjLElVVydhaK99DCFK+u3uPZDabYTqdCrP393dsNhspfuwY/ry6xSF4ALH4zlqHpNfr4fHxUUAGgwE+Pj6EISeQESVy8W11QMZ6XOp/VWmHZDwei9TtditMKXG1WslCAlL2LQjHjfUolEdeRVDTeDTOwzmH5Pn5WZj9+dHDTjKN4Lhjk9cRSJkoE6H9WQgRkCDD4VAY0vHPz08B7QCzLENROwEjE+fJNAjAfRt+ALKHo9FIAF9fX2USnT0cUml28A6+LSfy/K/e0v2EcmkMe0dwyn17e7syZB85sbE23iVv+i6Dt3WNDXNIIDIVU0KQzKVpKk4fDgccj0dh3YZHqsviVXIXGzJjyOfzuUjmBC5mD62NrLgTmsbGSGmPc+nElLsesm+USmZkyx5yzAncYpRMMyOj7u6xzRx2mROHnfTwxhRGhz0kOB3mviag0QpZUWN99ChVzB7jQnZ8Vk2MU9wtQQyTHNJlMmPIeY+AgFI1jlmFiwoCeio99rnHYk+ggNrEd8eCPwvQzY1kMuxySEDSd96hqOiehrcGzsax0hqNMShrjU2qkGYa25NCmrenzdPTk0hlhGgKQUVyGwU2/X/ZC76V225LORwIwANhu9thvljIjmFEutjwtCFb5s+2Wbwtui7VZvQvgdkQxx5u9+AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Google Sheets Charts\"\n        title=\"Google Sheets Charts\"\n        src=\"/static/3f65686ee429a6c0ea96d35b651fe31b/be86f/followers-sheet.png\"\n        srcset=\"/static/3f65686ee429a6c0ea96d35b651fe31b/e72ac/followers-sheet.png 166w,\n/static/3f65686ee429a6c0ea96d35b651fe31b/62452/followers-sheet.png 331w,\n/static/3f65686ee429a6c0ea96d35b651fe31b/be86f/followers-sheet.png 662w,\n/static/3f65686ee429a6c0ea96d35b651fe31b/0f7d5/followers-sheet.png 993w,\n/static/3f65686ee429a6c0ea96d35b651fe31b/1628f/followers-sheet.png 1232w\"\n        sizes=\"(max-width: 662px) 100vw, 662px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"divider\"></div>\n<h1>Final thoughts</h1>\n<p>Above all, enjoy and have fun. Don’t get so obsessed with numbers, growth and plain metrics. <strong>Get obsessed with helping, creating and inspiring.</strong></p>\n<div class=\"divider\"></div>\n<h1>Legacy remarks</h1>\n<p>As of April 2020, Instagram changed the way to inject the number of followers. I’m leaving here the previous approach based on JSON-LD, just for future reference.</p>\n<h3>Legacy (&#x3C; April 2020)</h3>\n<p>As mentioned before, I decided to read the number of followers by doing basic web scrapping. I didn’t want to bother setting up a Facebook account to use the Instagram API. It turns out Instagram uses <a href=\"https://developers.google.com/search/docs/guides/intro-structured-data\" target=\"_blank\" rel=\"nofollow\">JSON-LD</a> to <em>inject</em> structured data into the page. This makes it easy to read the follower count:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber 0\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">import</span> requests\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup\n\nURL <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.instagram.com/linaestadeviaje/'</span>\npage <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>URL<span class=\"token punctuation\">)</span>\nsoup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span> <span class=\"token string\">'html.parser'</span><span class=\"token punctuation\">)</span>\ndata <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>soup<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">'application/ld+json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n\nfollowers <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'mainEntityofPage'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'interactionStatistic'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'userInteractionCount'</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"title":"Tracking Instagram followers like a true nerd","description":"How to track your Instagram followers with Google Sheets and Python","meta":"This post shows how to read the instagram followers of an account with web scrapping using Python and BeautifulSoup, and how to save it in Google Sheets.","date":"April 20, 2020"}}},"pageContext":{"slug":"/tracking-instagram-followers-like-a-true-nerd/","previous":{"fields":{"slug":"/ctti-draft/"},"frontmatter":{"title":"Cracking the Toptal Interview - Draft"}},"next":{"fields":{"slug":"/quarantine/quarantine-day-32/"},"frontmatter":{"title":"Quarantine — Day 32"}}}},"staticQueryHashes":["3649515864","63159454"]}
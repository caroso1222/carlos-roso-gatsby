{"componentChunkName":"component---src-templates-blog-post-js","path":"/the-right-way-to-migrate-your-bash-profile-to-zsh/","result":{"data":{"markdownRemark":{"html":"<p>I’ve upgraded my Mac from macOS Mojave to macOS Catalina and the first thing I noticed is that <a href=\"https://es.wikipedia.org/wiki/Zsh\" target=\"_blank\" rel=\"nofollow\">zsh</a> is the new default shell, leaving Bash behind. I decided to switch but I found a few inconveniences with the setup, mainly with porting over my existing <code class=\"language-text\">bash_profile</code> to <code class=\"language-text\">zsh</code>.</p>\n<h1>zsh startup files</h1>\n<p><code class=\"language-text\">bash_profile</code> is bash specific, whereas <code class=\"language-text\">zsh</code> has its own set of <a href=\"http://zsh.sourceforge.net/Intro/intro_3.html\" target=\"_blank\" rel=\"nofollow\">startup files</a>. I’ve seen people generally accept the suggestion of moving everything from <code class=\"language-text\">.bash_profile</code> to <code class=\"language-text\">.zshrc</code>. It definitely works, but it’s not the strict appropriate way to do it.</p>\n<h2>Enter <code class=\"language-text\">.zshenv</code></h2>\n<p>zsh introduces 5  <a href=\"http://zsh.sourceforge.net/Intro/intro_3.html\" target=\"_blank\" rel=\"nofollow\">startup files</a>, each one sourced depending on the type of shell invocation. The two most important are <code class=\"language-text\">.zshrc</code> and <code class=\"language-text\">.zshenv</code> which, according to the <a href=\"https://linux.die.net/man/1/zsh\" target=\"_blank\" rel=\"nofollow\">man page</a> and <a href=\"https://www.reddit.com/r/zsh/comments/ewzrr6/etczshenv_vs_etczshzshenv/fg5uj6j/\" target=\"_blank\" rel=\"nofollow\">some</a> <a href=\"http://zsh.sourceforge.net/Intro/intro_3.html\" target=\"_blank\" rel=\"nofollow\">other</a> <a href=\"https://unix.stackexchange.com/a/71258\" target=\"_blank\" rel=\"nofollow\">resources</a> , works like this:</p>\n<ul>\n<li><strong><code class=\"language-text\">.zshenv</code></strong>: Sourced on <strong>all invocations of the shell</strong>. It often contains exported variables that should be available to other programs. For example, <code class=\"language-text\">$PATH</code>.</li>\n<li><strong><code class=\"language-text\">.zshrc</code></strong>: Sourced in <strong>interactive shells only</strong>. It should contain commands to set up aliases, functions, options, key bindings, etc.</li>\n</ul>\n<p>According to this, if you rely solely on <code class=\"language-text\">.zshrc</code>, your non-interactive shell scripts won’t work if they depend on the <code class=\"language-text\">$PATH</code>.</p>\n<blockquote>\n<p>Your <code class=\"language-text\">$PATH</code> and any other important ENV variable should be set in <code class=\"language-text\">.zshenv</code>. The rest can go into <code class=\"language-text\">.zshrc</code>.</p>\n</blockquote>\n<h1>Splitting instead of migrating</h1>\n<p>To put it in layman’s terms:</p>\n<ol>\n<li>Copy your <code class=\"language-text\">$PATH</code> statements from <code class=\"language-text\">~/.bash_profile</code> and copy them to <code class=\"language-text\">~/.zshenv</code> (create the file if you don’t have it).</li>\n<li>Copy your alias, functions, key bindings and more from <code class=\"language-text\">~/.bash_profile</code> to <code class=\"language-text\">~/.zshrc</code>.</li>\n<li>Restart your terminal</li>\n</ol>\n<div class=\"divider\"></div>\n<h1>Bonus</h1>\n<h2>Custom alias and functions</h2>\n<p>I keep my alias and functions in a separate file so that it doesn’t clutter <code class=\"language-text\">zshrc</code>. You can try to do the same:</p>\n<ol>\n<li>Copy your custom alias and functions from <code class=\"language-text\">~/.zshrc</code></li>\n<li>Paste these commands in a file called <code class=\"language-text\">~/.custom-alias</code></li>\n<li>Put this line at the end of your <code class=\"language-text\">.zshrc</code>: <code class=\"language-text\">source ~/.custom-alias</code></li>\n</ol>\n<h2>VSCode migration</h2>\n<p>VSCode will not catch up <code class=\"language-text\">zsh</code> as the default shell automatically. Adjust this with the following steps:</p>\n<ol>\n<li>Open VSCode settings. Mac users can do <code class=\"language-text\">CMD + Shift + P</code> and type “settings”.</li>\n<li>Open the JSON view (top right button)</li>\n<li>Type this at the end of the file:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"terminal.integrated.shell.osx\": \"/bin/zsh\"</code></pre></div>\n<ol start=\"4\">\n<li>Restart VSCode.</li>\n</ol>\n<p>Credits for VSCode migration: <a href=\"https://medium.com/fbdevclagos/updating-visual-studio-code-default-terminal-shell-from-bash-to-zsh-711c40d6f8dc\" target=\"_blank\" rel=\"nofollow\">Medium post</a>.</p>","frontmatter":{"title":"The right way to migrate your bash_profile to zsh","description":"It's not only about zshrc","meta":"How to correctly migrate bash_profile to zsh using both zshrc and zshenv.","date":"April 16, 2020"}}},"pageContext":{"slug":"/the-right-way-to-migrate-your-bash-profile-to-zsh/","previous":{"fields":{"slug":"/quarantine/quarantine-day-27/"},"frontmatter":{"title":"Quarantine — Day 27"}},"next":{"fields":{"slug":"/quarantine/quarantine-day-28/"},"frontmatter":{"title":"Quarantine — Day 28"}}}},"staticQueryHashes":["3649515864","63159454"]}